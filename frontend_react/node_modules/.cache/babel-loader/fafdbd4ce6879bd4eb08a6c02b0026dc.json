{"ast":null,"code":"var _jsxFileName = \"/Users/won-yungyeong/WEEKEND/abc/weekend_app/frontend/src/mypage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios'; // import { useHistory } from 'react-router-dom';\n\nimport { Avatar, Button, CssBaseline, TextField, Link, FormControl, FormControlLabel, Checkbox, FormHelperText, Grid, Box, Typography, Container } from '@mui/material/';\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst theme = createTheme();\nconst FormHelperTexts = styled(FormHelperText)`\n  width: 100%;\n  padding-left: 16px;\n  font-weight: 700;\n  color: #d32f2f;\n`;\n_c = FormHelperTexts;\nexport default function MyPage() {\n  _s();\n\n  const [emailError, setEmailError] = useState('');\n  const [passwordState, setPasswordState] = useState('');\n  const [passwordError, setPasswordError] = useState('');\n  const [nameError, setNameError] = useState('');\n  const [agreementError, setagreementError] = useState('');\n  const [checked, setChecked] = useState(false);\n  const [registerError, setRegisterError] = useState('');\n  const [myPageList, setMyPageList] = useState([]); // const history = useHistory();\n\n  useEffect(() => {\n    console.log('api:', process.env.REACT_APP_REQUEST_URL); // const headers = {\n    //   Authorization: `Bearer ${accessToken}`\n    // };\n    // key: Access-Token\n    // value: \n\n    axios.get(`http://localhost:5000/api/mypage`) // axios.get(`${process.env.REACT_APP_REQUEST_URL}/api/mypage`)\n    .then(response => {\n      setMyPageList(response.data.data);\n      console.log('response.data.data:', response.data.data);\n    });\n  }, []);\n\n  const handleAgree = event => {\n    setChecked(event.target.checked);\n  };\n\n  const onhandlePost = async data => {\n    const {\n      email,\n      firstName,\n      lastName,\n      password\n    } = data;\n    const name = firstName + ' ' + lastName;\n    const postData = {\n      email,\n      name,\n      password\n    }; // await fetch(\"http://localhost:5000/record/add\", {\n\n    console.log('data:', data);\n    await fetch(\"http://localhost:5000/user/join\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(postData)\n    }).then(res => res.json()).then(res => {\n      if (res.success) {\n        res.redirect('/');\n      }\n    }).catch(error => {\n      window.alert(error);\n      return;\n    });\n    await axios.post('http://localhost:5000/user/join', postData).then(function (response) {\n      console.log(response, 'joined successfully'); // history.push('/login');\n      // response.redirect(\"/login\");\n      // var redir = { redirect: \"/\" };\n      // return res.json(redir);\n      // response.data.redirect = '/login';\n\n      window.location = \"/login\"; // return response.json({ redirect: \"/\" });\n    }).catch(function (err) {\n      console.log(err);\n      setRegisterError('failed to join. check it again');\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const data = new FormData(e.currentTarget);\n    const joinData = {\n      email: data.get('email'),\n      firstName: data.get('firstName'),\n      lastName: data.get('lastName'),\n      password: data.get('password'),\n      rePassword: data.get('rePassword'),\n      checked: data.get('checked')\n    };\n    const {\n      email,\n      firstName,\n      lastName,\n      password,\n      rePassword\n    } = joinData;\n    const emailRegex = /([\\w-.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.)|(([\\w-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$/;\n    if (!emailRegex.test(email)) setEmailError('check your email');else setEmailError('');\n    const passwordRegex = /^(?=.*[a-zA-Z])(?=.*[!@#$%^*+=-])(?=.*[0-9]).{8,25}$/;\n    if (!passwordRegex.test(password)) setPasswordState('make your password with the combination of numbers and alpabets and special characters more than 8 letters');else setPasswordState('');\n    if (password !== rePassword) setPasswordError('password is not correct');else setPasswordError('');\n    const nameRegex = /^[가-힣a-zA-Z]+$/;\n    if (!nameRegex.test(firstName)) setNameError('check your name');else setNameError('');\n    if (!nameRegex.test(lastName)) setNameError('check your name');else setNameError('');\n    if (!checked) setagreementError('accept the condition & terms');else setagreementError('');\n\n    if (emailRegex.test(email) && passwordRegex.test(password) && password === rePassword && nameRegex.test(firstName) && nameRegex.test(lastName) && checked) {\n      onhandlePost(joinData);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(ThemeProvider, {\n    theme: theme,\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      component: \"main\",\n      maxWidth: \"xs\",\n      children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          marginTop: 8,\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          sx: {\n            m: 1,\n            bgcolor: 'secondary.main'\n          },\n          children: /*#__PURE__*/_jsxDEV(LockOutlinedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          component: \"h1\",\n          variant: \"h5\",\n          children: \"My Page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          component: \"form\",\n          noValidate: true,\n          onSubmit: handleSubmit,\n          sx: {\n            mt: 3\n          },\n          children: [/*#__PURE__*/_jsxDEV(FormControl, {\n            component: \"fieldset\",\n            variant: \"standard\",\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 2,\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  autoComplete: \"given-name\",\n                  name: \"firstName\",\n                  required: true,\n                  fullWidth: true,\n                  id: \"firstName\",\n                  label: \"First Name\",\n                  autoFocus: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                sm: 6,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  required: true,\n                  fullWidth: true,\n                  id: \"lastName\",\n                  label: \"Last Name\",\n                  name: \"lastName\",\n                  autoComplete: \"family-name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(FormHelperTexts, {\n                children: nameError\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  required: true,\n                  fullWidth: true,\n                  id: \"email\",\n                  label: \"Email Address\",\n                  name: \"email\",\n                  autoComplete: \"email\",\n                  error: emailError !== '' || false\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(FormHelperTexts, {\n                children: emailError\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  required: true,\n                  fullWidth: true,\n                  name: \"password\",\n                  label: \"Password\",\n                  type: \"password\",\n                  id: \"password\",\n                  autoComplete: \"new-password\",\n                  error: passwordError !== '' || false\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(FormHelperTexts, {\n                children: passwordState\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  required: true,\n                  fullWidth: true,\n                  name: \"rePassword\",\n                  label: \"rePassword\",\n                  type: \"password\",\n                  id: \"rePassword\",\n                  autoComplete: \"new-password\",\n                  error: passwordError !== '' || false\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(FormHelperTexts, {\n                children: passwordError\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                  control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                    onChange: handleAgree,\n                    value: \"allowExtraEmails\",\n                    color: \"primary\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 28\n                  }, this),\n                  label: \"I want to receive inspiration, marketing promotions and updates via email.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(FormHelperTexts, {\n                children: agreementError\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              fullWidth: true,\n              variant: \"contained\",\n              sx: {\n                mt: 3,\n                mb: 2\n              },\n              children: \"Sign Up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(FormHelperTexts, {\n            children: registerError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            justifyContent: \"flex-end\",\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                href: \"/login\",\n                variant: \"body2\",\n                children: \"Already have an account? Sign in\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 183,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MyPage, \"pQArCvq6S6WcJN6wgO3jye7KGTM=\");\n\n_c2 = MyPage;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"FormHelperTexts\");\n$RefreshReg$(_c2, \"MyPage\");","map":{"version":3,"sources":["/Users/won-yungyeong/WEEKEND/abc/weekend_app/frontend/src/mypage.js"],"names":["React","useEffect","useState","axios","Avatar","Button","CssBaseline","TextField","Link","FormControl","FormControlLabel","Checkbox","FormHelperText","Grid","Box","Typography","Container","LockOutlinedIcon","createTheme","ThemeProvider","styled","theme","FormHelperTexts","MyPage","emailError","setEmailError","passwordState","setPasswordState","passwordError","setPasswordError","nameError","setNameError","agreementError","setagreementError","checked","setChecked","registerError","setRegisterError","myPageList","setMyPageList","console","log","process","env","REACT_APP_REQUEST_URL","get","then","response","data","handleAgree","event","target","onhandlePost","email","firstName","lastName","password","name","postData","fetch","method","headers","body","JSON","stringify","res","json","success","redirect","catch","error","window","alert","post","location","err","handleSubmit","e","preventDefault","FormData","currentTarget","joinData","rePassword","emailRegex","test","passwordRegex","nameRegex","marginTop","display","flexDirection","alignItems","m","bgcolor","mt","mb"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\n// import { useHistory } from 'react-router-dom';\n\nimport {\n  Avatar,\n  Button,\n  CssBaseline,\n  TextField,\n  Link,\n  FormControl,\n  FormControlLabel,\n  Checkbox,\n  FormHelperText,\n  Grid,\n  Box,\n  Typography,\n  Container,\n} from '@mui/material/';\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport styled from 'styled-components';\n\nconst theme = createTheme();\n\nconst FormHelperTexts = styled(FormHelperText)`\n  width: 100%;\n  padding-left: 16px;\n  font-weight: 700;\n  color: #d32f2f;\n`;\n\n\nexport default function MyPage() {\n    \nconst [emailError, setEmailError] = useState('');\nconst [passwordState, setPasswordState] = useState('');\nconst [passwordError, setPasswordError] = useState('');\nconst [nameError, setNameError] = useState('');\nconst [agreementError, setagreementError] = useState('');\nconst [checked, setChecked] = useState(false);\nconst [registerError, setRegisterError] = useState('');\n\n\nconst [myPageList, setMyPageList] = useState([]);\n\n// const history = useHistory();\n\nuseEffect(() => {\n  console.log('api:',process.env.REACT_APP_REQUEST_URL);\n  \n  // const headers = {\n  //   Authorization: `Bearer ${accessToken}`\n  // };\n\n  // key: Access-Token\n  // value: \n  axios.get(`http://localhost:5000/api/mypage`)\n  // axios.get(`${process.env.REACT_APP_REQUEST_URL}/api/mypage`)\n  .then((response) => {\n      setMyPageList(response.data.data);\n      console.log('response.data.data:',response.data.data);\n  })\n}, []);\n\n\nconst handleAgree = (event) => {\n    setChecked(event.target.checked);\n  };\n\nconst onhandlePost = async (data) => {\n  const { email, firstName, lastName, password } = data;\n  const name = firstName + ' ' +lastName;\n  const postData = { email, name, password};\n\n  // await fetch(\"http://localhost:5000/record/add\", {\n  console.log('data:',data);\n\n  await fetch(\"http://localhost:5000/user/join\", {\n     method: \"POST\",\n     headers: {\n       \"Content-Type\": \"application/json\",\n     },\n     body: JSON.stringify(postData),\n   })\n   .then(res => res.json())\n   .then(res => {\n     if(res.success){\n      res.redirect('/');\n     }\n   })\n   .catch(error => {\n     window.alert(error);\n     return;\n   });\n\n  await axios\n    .post('http://localhost:5000/user/join', postData)\n    .then(function (response) {\n      console.log(response, 'joined successfully');\n      // history.push('/login');\n      // response.redirect(\"/login\");\n      // var redir = { redirect: \"/\" };\n      // return res.json(redir);\n\n\n      // response.data.redirect = '/login';\n      window.location = \"/login\";\n\n      \n      // return response.json({ redirect: \"/\" });\n\n    })\n    .catch(function (err) {\n      console.log(err);\n      setRegisterError('failed to join. check it again');\n    });\n};\n\nconst handleSubmit = (e) => {\n    e.preventDefault();\n\n    const data = new FormData(e.currentTarget);\n\n    const joinData = {\n        email: data.get('email'),\n        firstName: data.get('firstName'),\n        lastName: data.get('lastName'),\n        password: data.get('password'),\n        rePassword: data.get('rePassword'),\n        checked: data.get('checked')\n    };\n    \n    const { email, firstName, lastName, password, rePassword } = joinData;\n\n    const emailRegex = /([\\w-.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.)|(([\\w-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$/;\n\n    if(!emailRegex.test(email))\n        setEmailError('check your email');\n    else\n        setEmailError('');\n\n    const passwordRegex = /^(?=.*[a-zA-Z])(?=.*[!@#$%^*+=-])(?=.*[0-9]).{8,25}$/;\n    if(!passwordRegex.test(password))\n        setPasswordState('make your password with the combination of numbers and alpabets and special characters more than 8 letters')\n    else\n        setPasswordState('');\n\n    if(password !== rePassword)\n        setPasswordError('password is not correct');\n    else\n        setPasswordError('');\n\n    const nameRegex = /^[가-힣a-zA-Z]+$/;\n    if(!nameRegex.test(firstName))\n        setNameError('check your name');\n    else\n        setNameError('');\n\n    if(!nameRegex.test(lastName))\n        setNameError('check your name');\n    else\n        setNameError('');\n    if(!checked)\n        setagreementError('accept the condition & terms')\n    else\n        setagreementError('');\n      \n    if(\n      emailRegex.test(email) &&\n      passwordRegex.test(password) &&\n      password === rePassword &&\n      nameRegex.test(firstName) &&\n      nameRegex.test(lastName) &&\n      checked\n    ) {\n      onhandlePost(joinData);\n    }\n};\n\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Container component=\"main\" maxWidth=\"xs\">\n        <CssBaseline />\n        <Box\n          sx={{\n            marginTop: 8,\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n          }}\n        >\n          <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\n            <LockOutlinedIcon />\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h5\">\n            My Page\n          </Typography>\n          <Box component=\"form\" noValidate onSubmit={handleSubmit} sx={{ mt: 3 }}>\n          <FormControl component=\"fieldset\" variant=\"standard\">\n\n            <Grid container spacing={2}>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  autoComplete=\"given-name\"\n                  name=\"firstName\"\n                  required\n                  fullWidth\n                  id=\"firstName\"\n                  label=\"First Name\"\n                  autoFocus\n                />\n              </Grid>\n\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  required\n                  fullWidth\n                  id=\"lastName\"\n                  label=\"Last Name\"\n                  name=\"lastName\"\n                  autoComplete=\"family-name\"\n                />\n              </Grid>\n              <FormHelperTexts>{nameError}</FormHelperTexts>\n\n              <Grid item xs={12}>\n                <TextField\n                  required\n                  fullWidth\n                  id=\"email\"\n                  label=\"Email Address\"\n                  name=\"email\"\n                  autoComplete=\"email\"\n                  error={emailError !== '' || false}\n                />\n              </Grid>\n              <FormHelperTexts>{emailError}</FormHelperTexts>\n\n              <Grid item xs={12}>\n                <TextField\n                  required\n                  fullWidth\n                  name=\"password\"\n                  label=\"Password\"\n                  type=\"password\"\n                  id=\"password\"\n                  autoComplete=\"new-password\"\n                  error={passwordError !== '' || false}\n                />\n              </Grid>\n              <FormHelperTexts>{passwordState}</FormHelperTexts>\n              <Grid item xs={12}>\n                <TextField\n                  required\n                  fullWidth\n                  name=\"rePassword\"\n                  label=\"rePassword\"\n                  type=\"password\"\n                  id=\"rePassword\"\n                  autoComplete=\"new-password\"\n                  error={passwordError !== '' || false}\n                />\n              </Grid>\n              <FormHelperTexts>{passwordError}</FormHelperTexts>\n              <Grid item xs={12}>\n                <FormControlLabel\n                  control={<Checkbox onChange={handleAgree} value=\"allowExtraEmails\" color=\"primary\" />}\n                  label=\"I want to receive inspiration, marketing promotions and updates via email.\"\n                />\n              </Grid>\n              <FormHelperTexts>{agreementError}</FormHelperTexts>\n\n            </Grid>\n            <Button\n              type=\"submit\"\n              fullWidth\n              variant=\"contained\"\n              sx={{ mt: 3, mb: 2 }}\n            >\n              Sign Up\n            </Button>\n            </FormControl>\n            <FormHelperTexts>{registerError}</FormHelperTexts>\n\n            <Grid container justifyContent=\"flex-end\">\n              <Grid item>\n                <Link href=\"/login\" variant=\"body2\">\n                  Already have an account? Sign in\n                </Link>\n              </Grid>\n            </Grid>\n          </Box>\n        </Box>\n      </Container>\n    </ThemeProvider>\n  );\n}"]},"metadata":{},"sourceType":"module"}